---
title: HTTP 04
date: 2022-11-29 +09:00
categories: [HTTP]
tags: [http]
---


# HTTP 상태코드

1. 1XX (Informational) : 요청이 수신되어 처리중
2. 2XX (Successful) : 요청 정상 처리
3. 3XX (Redirection) : 요청을 완료하려면 추가 행동이 필요
4. 4XX (Client Error) : 클라이언트 오류, 잘못된 문법 등으로 서버가 요청을 수행할 수 없음
5. 5XX (Server Error) : 서버 오류, 서버가 정상 요청을 처리하지 못함

## 1XX (Informational)
    : 거의 사용하지 않음.

## 2XX (Successful)
    : 클라이언트의 요청을 성공적으로 처리

    - 200 OK 
        : 요청 성공
    - 201 Created 
        : 요청 성공 후 새로운 리소스 생성됨, 
        __Status code:201,Location:생성된 리소스의 URI__로 HTTP응답 메시지를 만들어 클라이언트에 보냄
    - 202 Accepted 
        : 요청이 접수되었으나 처리가 완료되지 않음
        배치 처리 같은 곳에서 사용. 잘 사용하지는 않음 
    - 204 No Content
        : 서버가 요청을 성공적으로 수행했지만, 응답 페이지로 본문에 보낼 데이터가 없음.
        결과 내용이 없어도 204 메시지만으로 성공 인식 가능

## 3XX (Redirection)
    : 요청을 완료하기 위해 유저 에이전트(웹브라우저)의 추가 조치 필요

| 종류  | 상태코드 | 리다이렉트 시 | 사용 여부 |
|:-----:|:-------:|:------------:|:--------:|
| 영구  | 301 | 요청 메서드가 GET으로 변하고, 본문이 제거 될 수 있음 | 디폴트로 자주 사용|
|      | 308 | 요청 메서드, 본문 유지 | 거의 사용 X
| 일시 | 302 | 요청 메서드가 GET으로 변하고, 본문이 제거 될 수 있음 | 디폴트로 자주 사용 |
|      | 307 | 요청 메서드, 본문 유지 | 권장
|      | 303 | 요청 메서드가 GET으로 변함 | 권장
| 기타 | 300 | | 사용 X
|      | 304 | | 자주 사용, 캐시 목적으로 사용

301 = 302, 308 = 307

    리다이렉션 이해
        : 웹브라우저는 3XX 응답 결과에 Location 헤더가 있으면, Location 위치로 자동 이동(리다이렉트)
        ex. 사용자가 예전 이벤트 페이지 URL을 북마크 해두었는데 새로운 이벤트 페이지 URL로 바뀐 경우,
        예전 이벤트 페이지에 접속해도 새로운 이벤트 페이지 URL로 자동으로 접속할 수 있게 함

    리다이렉션 종류
        1. 영구 리다이렉션 : 특정 리소스의 URI가 영구적으로 이동
            - 이벤트 페이지의 URI가 바뀌어 더이상 사용하면 안되거나 내부적으로 URI 경로가 아예 바뀐 경우
            - 301 Moved Parmanently
                : 리다이렉트시 __요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음(MAY)__
            - 308 Permannet Redirect
                : 리다이렉트시 __요청 메서드와 본문 유지__

            >실무에서는 308을 거의 사용하지 않는다.
            URI가 바뀌면 내부적으로 전달해야하는 데이터 자체가 바뀌기 때문에, POST로 요청을 받아도 리다이렉트시 GET으로 바뀌는게 맞다.
            {: .prompt-tip }

        2. 일시 리다이렉션 : 일시적인 변경
            - 주문 완료 후 주문 내역 화면으로 이동
            - 302 Found
                : 리다이렉트시 __요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음(MAY)__
            - 307 Temporary Redirect
                : 리다이렉트시 __요청 메서드와 본문 유지(요청 메서드를 변경하면 안됨=MUST NOT)__
            - 303 See Other
                : 리다이렉트시 __요청 메서드가 GET으로 변경(MUST)__

            - PRG: Post/Redirect/Get
                : POST로 주문 후 웹 브라우저를 새로고침시 중복주문 방지
                POST 주문 후 주문 결과 화면을 GET메서드로 리다이렉트
                >새로고침(Refresh)는 '마지막에 요청한 request를 재요청'하도록 정의하고 구현됨
                {: .prompt-tip }

        3. 특수 리다이렉션 : 결과 대신 캐시를 사용
            - 304 Not Modified
                : 조건부 GET, HEAD 요청 시 사용


## 4XX (Client Error)
    : 클라이언트 오류

| 상태코드 | 원인 |  |
|:-------:|:------------:|:--------:|
| 400 | 요청 구문, 메시지 오류(요청 파라미터가 잘못됨, API 스펙이 맞지 않을 때) |
| 401 | 인증이 되지 않는 경우 |
| 403 | 인증은 됐지만 접근권한이 불충분한 경우 |
| 404 | 요청 리소스가 서버에 없는 경우 |

    클라이언트가 이미 잘못된 요청, 데이터를 보내고 있으므로 재시도해도 실패.

    1. 400 Bad Request
        : 클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없음

    2. 401 Unauthorized
        : 클라이언트가 해당 리소스에 대한 인증이 필요함
        응답에 WWW-Authenticate 헤더와 함께 인증 방법을 설명
        인증(Authentication) : 본인이 누구인지 확인(로그인)
        인가(Authorization) : 권한부여(ADMIN 권한 처럼 특정 리소스에 접근할 수 있는 권한, 인증이 있어야 인가가 있음)
    
    3. 403 Forbidden
        : 인증은 됐지만 접근 권한이 불충분한 경우
    
    4. 404 Not Found
        : 요청 리소스가 서버에 없는 경우
        클라이언트가 권한이 부족한 리소스에 접근할 때 해당 리소스를 숨기고 싶은 경우

## 5XX (Server Error)
    : 서버 오류

| 상태코드 | 원인 |  |
|:-----:|:-------:|:--------:|
| 500 | 서버 문제(NullPointerException, DB 접근 불가) | 애매하면 사용|
| 503 | 일시적 과부하/예정 작업(서비스 이용 불가) | 

    서버에 문제가 있으므로 재시도하면 성공할 수도 있음.
    >왠만하면 5xx 오류는 내면 안된다. 진짜 심각한 서버 오류가 있을 때만!
    {: .prompt-warning }

    1. 500 Internal Server Error
        : 서버문제, 애매하면 500 오류

    2. 503 Service Unavailable
        : 서비스 이용 불가
        Retry-After 헤더 필드로 얼마뒤에 복구되는지 보낼 수 있음.